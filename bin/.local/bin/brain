#!/usr/bin/env bash

obsidian="obsidian://open?vault=$vault"

if [[ $1 = "new-journal" ]]; then
    filename="$(date "+%Y-%m-%d")"
    journal_path="2 Areas/1 journal/$filename.md"
    file="$VAULT_PATH/$journal_path"
    url=$( date "+${obsidian}&file=$filename" )
    
    touch "${file}"
    
    if ! pgrep Obsidian >/dev/null; then
        open -a 'Obsidian'
        sleep 1
    fi

    open "${url}"
else
    echo "must pass subcommand: 'new-journal'"
fi

